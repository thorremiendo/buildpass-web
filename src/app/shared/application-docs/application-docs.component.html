<div class="application-docs">
  <div class="loader" *ngIf="!dataSource">
    <mat-spinner [diameter]="50"></mat-spinner>
  </div>

  <table mat-table [dataSource]="dataSource" *ngIf="dataSource && documentTypes">
    <!-- Index Column -->
    <ng-container matColumnDef="index">
      <th mat-header-cell *matHeaderCellDef></th>
      <td mat-cell *matCellDef="let element; let i = index">
        <div *ngIf="!element.label">
          <mat-icon [inline]="true" *ngIf="element.document_status != 'Compliant' && element.document_status != 'Non-Compliant'">
            assignment
          </mat-icon>
          <mat-icon [inline]="true" *ngIf="element.document_status == 'Compliant'">
            assignment_turned_in
          </mat-icon>
          <mat-icon [inline]="true" *ngIf="element.document_status == 'Non-Compliant'">
            assignment_late
          </mat-icon>
        </div>
      </td>
    </ng-container>
  
    <!-- Name Column -->
    <ng-container matColumnDef="name">
      <th mat-header-cell *matHeaderCellDef>DOCUMENTS</th>
      <td
        mat-cell
        *matCellDef="let element"
        [ngClass]="{ 'doc-category-header': element.label }"
      >
        <span *ngIf="element.label">
          {{element.label}}
        </span>
        <span 
          *ngIf="!element.label"
          class="document-link"
          (click)="chooseDocument(element.id, 0)"
        >
          {{getDocType(element.document_id)}}
        </span>
      </td>
    </ng-container>
  
    <!-- Status Column -->
    <ng-container matColumnDef="status">
      <th mat-header-cell *matHeaderCellDef>STATUS</th>
      <td mat-cell *matCellDef="let element">
        <div *ngIf="!element.label">
          {{element.document_status}}
        </div>
      </td>
    </ng-container>
  
    <!-- Remarks Column -->
    <ng-container matColumnDef="remarks">
      <th mat-header-cell *matHeaderCellDef>REMARKS</th>
      <td mat-cell *matCellDef="let element">
        <mat-icon
          [inline]="true"
          *ngIf="!element.label"
          class="remark"
          (click)="chooseDocument(element.id, 1)"
        >
          comment
        </mat-icon>
      </td>
    </ng-container>
  
    <tr
      mat-header-row
      *matHeaderRowDef="displayedColumns; sticky: true"
    ></tr>
    <tr
      mat-row
      *matRowDef="let row; columns: displayedColumns"
      [ngClass]="{
        'pending': row.document_status == 'For Review',
        'not-applicable': row.document_status == 'Not Applicable',
        'compliant': row.document_status == 'Compliant',
        'non-compliant': row.document_status == 'Non Compliant',
        'hidden': row.label && row.label == 'hidden'
      }"
    ></tr>
  </table>
</div>