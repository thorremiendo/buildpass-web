<div class="container">
  <div id="pdf-div" class="pdf-view"></div>
  <!-- <custom-rhp-component *ngIf='annotationManager'
      [annotationManager]='annotationManager'>
  </custom-rhp-component> -->
</div>

<div [formGroup]="permitDetails" *ngIf="user.employee_detail">
  <div
    class="row"
    *ngIf="
      this.data.form.document_id !== 49 &&
      this.data.form.document_id !== 44 &&
      this.data.form.document_id !== 43 &&
      this.data.form.document_id !== 45 &&
      this.data.form.document_id !== 50
    "
  >
    <div class="col-md-12 mt-5">
      <mat-form-field appearance="fill">
        <mat-label>Review</mat-label>
        <mat-select formControlName="is_compliant">
          <mat-option value="1"> Compliant </mat-option>
          <mat-option value="2"> Non-Compliant </mat-option>
        </mat-select>
      </mat-form-field>
      <mat-form-field
        class="example-full-width mt-3"
        *ngIf="this.permitDetails.value.is_compliant == '2'"
      >
        <mat-label>Leave a comment</mat-label>
        <textarea
          matInput
          formControlName="form_remarks"
          placeholder="Comment"
        ></textarea>
      </mat-form-field>
    </div>
  </div>
  <div class="d-flex justify-content-between align-items-center my-4">
    <div class="text-left">
      <button mat-raised-button color="accent" (click)="onNoClick()">
        Close
      </button>
    </div>
    <div
      class="text-right"
      *ngIf="
        this.data.form.document_id !== 49 &&
        this.data.form.document_id !== 44 &&
        this.data.form.document_id !== 43 &&
        this.data.form.document_id !== 45 &&
        this.data.form.document_id !== 50
      "
    >
      <button mat-raised-button color="primary" (click)="callSave()">
        Save
      </button>
    </div>
  </div>
</div>
<div class="mt-3" *ngIf="!user.employee_detail">
  <div
    *ngIf="
      data.form.document_status_id == 2 || data.form.document_status_id == 0
    "
  >
    <p style="font-size: 12px">
      <strong
        >Note: This is a non-compliant document, please review remarks and
        upload the revised file.</strong
      >
    </p>

    <mat-expansion-panel
      (opened)="panelOpenState = true"
      (closed)="panelOpenState = false"
    >
      <mat-expansion-panel-header>
        <mat-panel-title
          ><mat-icon aria-hidden="false" class="mr-2" style="color: maroon"
            >announcement</mat-icon
          >Remarks</mat-panel-title
        >
      </mat-expansion-panel-header>
      <app-remarks-history-table></app-remarks-history-table>
    </mat-expansion-panel>
    <ngx-dropzone
      (change)="onSelect($event, 'selectedForm')"
      [multiple]="false"
      class="mt-3"
      accept="application/pdf"
    >
      <ngx-dropzone-label>Click here to upload new file! </ngx-dropzone-label>
      <ngx-dropzone-preview
        *ngIf="selectedForm"
        [removable]="true"
        (removed)="onRemove('selectedForm')"
        class="mx-auto"
      >
        <ngx-dropzone-label
          >{{ selectedForm.name }} ({{ selectedForm.type }})</ngx-dropzone-label
        >
      </ngx-dropzone-preview>
    </ngx-dropzone>
  </div>
</div>
<div *ngIf="!user.employee_detail">
  <div class="d-flex justify-content-between align-items-center mt-5">
    <button mat-raised-button color="accent" (click)="onNoClick()">
      Close
    </button>
    <button
      *ngIf="
        data.form.document_status_id == 2 || data.form.document_status_id == 0
      "
      mat-raised-button
      color="primary"
      (click)="callUpdate()"
    >
      Update
    </button>
  </div>
</div>
