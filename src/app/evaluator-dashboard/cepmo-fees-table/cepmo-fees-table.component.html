<div *ngIf="dataSource">
  <table mat-table [dataSource]="dataSource" class="full-width" #itemsTable>
    <ng-container matColumnDef="number">
      <th mat-header-cell *matHeaderCellDef>No.</th>
      <td mat-cell *matCellDef="let item; let i = index">
        {{ item.name ? i + 1 : "Total" }}
      </td>
    </ng-container>

    <ng-container matColumnDef="description">
      <th mat-header-cell *matHeaderCellDef>Description</th>
      <td mat-cell *matCellDef="let item">
        {{ item.name ? item.name : "----------------------" }}
      </td>
    </ng-container>

    <ng-container matColumnDef="evaluator">
      <th mat-header-cell *matHeaderCellDef>Assessed By</th>
      <td mat-cell *matCellDef="let item">
        {{ item.evaluator_detail ? item.evaluator_detail.first_name : "" }}
        {{ item.evaluator_detail ? item.evaluator_detail.last_name : "" }}
      </td>
    </ng-container>

    <ng-container matColumnDef="amount">
      <th mat-header-cell *matHeaderCellDef>Amount</th>
      <td mat-cell *matCellDef="let item">
        {{
          item.amount
            ? (item.amount | currency: "PHP")
            : (item.office | currency: "PHP")
        }}
      </td>
    </ng-container>

    <!-- Action Column -->
    <ng-container matColumnDef="action">
      <th mat-header-cell *matHeaderCellDef>Action</th>
      <td mat-cell *matCellDef="let item; let i = index">
        <button
          mat-button
          color="accent"
          (click)="onRemove(item.id)"
          [disabled]="evaluatorDetails.office_id !== 2"
          *ngIf="item.name"
        >
          Remove
        </button>
      </td>
    </ng-container>

    <tr mat-header-row *matHeaderRowDef="columnsToDisplay"></tr>
    <tr mat-row *matRowDef="let items; columns: columnsToDisplay"></tr>
  </table>

  <div class="text-center" *ngIf="dataSource.length === 0">
    <div class="mt-3">
      <h3>No items</h3>
      <button
        mat-raised-button
        color="primary"
        type="button"
        (click)="showAddItem()"
        [disabled]="evaluatorDetails.office_id !== 2"
      >
        Add One Row
      </button>
    </div>
  </div>

  <div *ngIf="dataSource.length >= 1" class="text-center mt-5">
    <button
      mat-raised-button
      color="primary"
      type="button"
      (click)="showAddItem()"
      [disabled]="evaluatorDetails.office_id !== 2"
    >
      Add Another Item
    </button>
  </div>
</div>
